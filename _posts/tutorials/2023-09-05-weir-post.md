---
layout: post
title: 18. Weir Flow with VOF model
category: tutorials
---

# Weir

### * [ê²©ì íŒŒì¼ ë‹¤ìš´ë¡œë“œ](https://drive.google.com/file/d/1ODSzqSH9TfIjkmnVNm5p5XLBPX-gjplN/view?usp=sharing)

## 1. Weir ê°œìš” 

|[![intro](https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/main.png)](https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/main.png){:target="_blank"}|

ìœ„ì–´(Weir)ëŠ” ìˆ˜ê³µí•™ì—ì„œ ìˆ˜ë¡œì— ì„¤ì§€í•˜ëŠ” êµ¬ì¡°ë¬¼ë¡œ ë¬¼ì´ ë„˜ì¹˜ê²Œ ë§Œë“¤ì–´ íŠ¹ì • ìˆ˜ìœ„ë¥¼ ìœ ì§€í•˜ê±°ë‚˜ ìœ ëŸ‰ì„ ì¸¡ì •í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤. CFDì—ì„œëŠ” ì´ë¡ ì‹ìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆëŠ” ìœ ëŸ‰ê³¼ í•´ì„ ê²°ê³¼ë¥¼ ë¹„êµí•˜ì—¬ ì½”ë“œ ê²€ì¦ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.

ë³¸ ì˜ˆì œëŠ” ì‚¬ê° ìœ„ì–´ì—ì„œ ìˆ˜ìœ„ê°€ ì¼ì •í•œ ê²½ìš°ì— ìœ ëŸ‰ í•´ì„ì„ ìœ„í•œ ì˜ˆì œì´ë‹¤.

ê³„ì‚° ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

+ ë¬¼ì˜ ì…êµ¬ ìˆ˜ìœ„ : 1.6 m, 15696 Pa
+ solver : interFoam
+ ë‚œë¥˜ëª¨ë¸ : standard ğ‘˜ âˆ’ Îµ 


## 2. í”„ë¡œê·¸ë¨ì˜ êµ¬ë™

í”„ë¡œê·¸ë¨ ì‹¤í–‰ í›„ launcherì—ì„œ 'Open'ì„ ì„ íƒí•˜ê³  ê²©ì ìƒì„± íŠœí† ë¦¬ì–¼ì—ì„œ ë§Œë“  weir í´ë”ë¥¼ ì„ íƒí•œë‹¤(í˜¹ì€ New Caseë¥¼ ì„ íƒí•˜ê³  ë©”ë‰´ì˜ File - Load Mesh - OpenFOAMì—ì„œ weir/case/constant í´ë”ë¥¼ ì„ íƒí•œë‹¤).

'Solver Type'ì€ Pressure-based, 'Multiphase Model'ì€ Volume of Fluid', GravityëŠ” (0 0 -9.81)ë¡œ ì„¤ì •í•œë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/launcher.png"><br> launcher ì„¤ì •
</p>
<br>

## 3. General

Time ì„ Transientë¡œ ë³€ê²½í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë””í´íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/general.png"><br> General ì„¤ì •
</p>

## 4. Models

ë‚œë¥˜ ëª¨ë¸ì€ $standard$ $k-\epsilon$ ëª¨ë¸ì„ ì‚¬ìš©í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë””í´íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/turbulence.png"><br> Turbulence Model ì„¤ì •
</p>


## 5. Materials

ë³¸ ì˜ˆì œëŠ” ì´ìƒìœ ë™ì´ë¯€ë¡œ ë‘ ê°œì˜ ìœ ì²´ê°€ í•„ìš”í•˜ë‹¤. Material Configuration ë¶€ë¶„ì˜ ìƒë‹¨ ì˜¤ë¥¸ìª½ì˜ (+)ë¥¼ ëˆ„ë¥´ë©´ ìœ ì²´ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. water-liquidë¥¼ ì¶”ê°€í•˜ê³  ì´ë¦„ì„ waterë¡œ ë°”ê¾¸ì–´ ì¤€ë‹¤.

+ water
    + density : 1000
    + viscosity : 0.001
  
+ air
    + density : 1.225
    + viscosity : 1.79e-5

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/material.png"><br> Materials ì„¤ì •
</p>

## 6. Cell Zone Conditions

Cell Zone Conditionsì—ëŠ” region0ê°€ ìˆë‹¤.(multi-regionì¼ ë•ŒëŠ” ì—¬ëŸ¬ê°œì˜ regionì´ í‘œì‹œëœë‹¤.) regionì˜ ìœ ì²´ë¥¼ ì„¤ì •í•œë‹¤. region0ë¥¼ ë”ë¸” í´ë¦­í•˜ë©´ ì„¤ì •ì°½ì´ ì—´ë¦°ë‹¤. Primary Materialì€ air, Secondary materialì€ waterë¡œ ì§€ì •í•œë‹¤. Surface Tensionì€ 0ì„ ì‚¬ìš©í•œë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/region.png"><br> Cell Zone Conditions ì„¤ì •
</p>

## 7. Boundary Conditions

ê²½ê³„ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•œë‹¤.

+ waterin
    + type : Pressure Inlet
    + Total Pressure : 15696
    + Turbulent Intensity : 1
    + Turbulent Viscosity Ratio : 10
    + Volume Fraction(water) : 1
  
<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/inlet.png"><br> water-in ê²½ê³„ì¡°ê±´
</p>

+ airin
    + type : Pressure Inlet
    + Total Pressure : 0
    + Turbulent Intensity : 1
    + Turbulent Viscosity Ratio : 10
    + Volume Fraction water : 0
  
<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/inlet-air.png"><br> air-in ê²½ê³„ì¡°ê±´
</p>

+ open
    + type : Pressure Outlet
    + Total Pressure : 0
    + Backflow Turbulent Intensity : 1
    + Backflow Turbulent Viscosity Ratio : 10
    + Backflow Volume Fraction(water) : 0

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/top.png"><br> far_top ê²½ê³„ì¡°ê±´
</p>

+ out
    + type : Outflow
  
+ weir, bottom
    + type : wall
  
<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/wall.png"><br> wall ê²½ê³„ì¡°ê±´
</p>

+ leftside, rightside
    + type : symmetry


## 8. Numerical Conditions

ìˆ˜ì¹˜í•´ì„ ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•œë‹¤.

+ Pressure-Velocity Coupling Scheme : SIMPLE(ë””í´íŠ¸)

+ Use Momentum Predictor : On(ë””í´íŠ¸)

+ Discretization Schemes
    + Time : First Order Implicit
    + Pressure : Momentum Weighted Reconstruct
    + Momentum : Second Order Upwind
    + Turbulence : First Order Upwind
    + Volume Fraction : Second Order Upwind

+ Under-Relaxation Factors : ëª¨ë‘ 1ë¡œ ì„¤ì •

+ Improve Stability : Off(ë””í´íŠ¸)

+ Max Iteration per Time Step : 1

+ Number of Correctors : 2

+ Multiphaseì™€ Convergence Criteria : ë””í´íŠ¸ ì‚¬ìš©
  
<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/numerical.png"><br> Numerical Conditions
</p>


## 9. Monitoring

Add-Surface ì„ íƒí›„ Report Typeì€ Volume Flow Rate, ê´€ì°°í•˜ê³ ì í•˜ëŠ” ì˜ì—­ì€ waterinìœ¼ë¡œ ì„ íƒí•œë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/monitor.png"><br> ìœ ëŸ‰ ëª¨ë‹ˆí„°ë§ ì„¤ì •
</p>


## 10. Initialization

ì´ˆê¸°ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•œë‹¤.

+ velocity : (0 0 0)
+ Pressure : 0
+ Scale of Velocity : 1
+ Turbulent Intensity : 1
+ Turbulent Viscosity Ratio : 10
+ Volume Fraction(water) : 0

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/initial.png"><br> ì´ˆê¸°ì¡°ê±´ ì„¤ì •
</p>

water ì˜ì—­ì˜ ì´ˆê¸°ì¡°ê±´ì„ ì£¼ê¸° ìœ„í•´ ë‘ ê°œì˜ ì„¹ì…˜ì„ ë§Œë“ ë‹¤.

Initialization-Advanced-Section-Create ë¥¼ í´ë¦­í•œ í›„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•œë‹¤.

+ region1
    + Min.point : (0.05 -1 0)
    + Max.point : (2 1 0.2)
    + Volume Fraction(water) : 1

+ region2
    + Min.point : (-2 -1 0)
    + Max.point : (-0.05 1 1.6)
    + Volume Fraction(water) : 1
  
Override Boundary Value ì˜µì…˜ì€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/setFields.png"><br> Section ì´ˆê¸°í™”
</p>

Advanced - Sectionsì— ë‘ ê°œì˜ ì„¹ì…˜ì´ ë§Œë“¤ì–´ì¡Œê³  ê° í•­ëª©ì˜ ëˆˆ ëª¨ì–‘ í‘œì‹œë¥¼ í´ë¦­í•˜ë©´ ì˜ì—­ì„ ë””ìŠ¤í”Œë ˆì´ í•  ìˆ˜ ìˆë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/setFieldsDisplay.png"><br> ì´ˆê¸°í™” ì˜ì—­ ë””ìŠ¤í”Œë ˆì´
</p>

í•˜ë‹¨ì˜ Initialize ë²„íŠ¼ì„ í´ë¦­í•œ í›„, File - Save ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì„¤ì •ì„ ì €ì¥í•œë‹¤.


## 11. Run Conditions & Run

Run Conditions ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì • í›„ ê³„ì‚°ì„ ì§„í–‰í•œë‹¤.

+ Time Stepping Method : Adaptive
+ Max Courant Number : 1
+ Max Courant Number for VoF : 1
+ End time : 20
+ Save Interval : 0.1

ë³‘ë ¬ì—°ì‚°ì„ ìœ„í•´ì„œëŠ” ë©”ë‰´ì˜ Parallelì„ ì‹¤í–‰í•˜ê³  ì›í•˜ëŠ” CPU ì½”ì–´ ê°œìˆ˜ë¥¼ ì…ë ¥í•œë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/run.png"><br> ìœ ëŸ‰ ëª¨ë‹ˆí„°ë§ í™”ë©´
</p>
<br>

## 12. í›„ì²˜ë¦¬

ë¬¼ì˜ íë¦„ì„ ê·¸ë ¤ë³¸ë‹¤.

External toolsì˜ paraview ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ paraviewë¥¼ ì‹¤í–‰í•˜ê³  baram.foam íŒŒì¼ì„ ì½ëŠ”ë‹¤.

ë³‘ë ¬ë¡œ ê³„ì‚°í–ˆë‹¤ë©´ Case Typeì„ Decomposed Caseë¡œ ë³€ê²½í•œë‹¤.

<p align='left'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/clip.png"> Clip í•„í„°ë¥¼ ì´ìš©í•´ì„œ Volume fractionì´ 0.5 ì´ìƒì¸ ì˜ì—­ì„ ì˜ë¼ì¤€ë‹¤.
</p>

Fieldë¥¼ Uë¡œ ë³€ê²½í•œë‹¤. Pipeline Browserì˜ baram.foamì„ Outlineìœ¼ë¡œ í‘œì‹œí•˜ê³ , weir.stl íŒŒì¼ì„ ì½ì–´ Solid Colorë¡œ í‘œì‹œí•˜ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ëœë‹¤.

<p align='center'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/pvClip.png"><br> Clip water 
</p>

<p align='left'>
    <img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/weir/play.png"> Play ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë™ì˜ìƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
</p>



